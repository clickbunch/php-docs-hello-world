define("app/utils/TrackingUtil",["require"],function(){return{"initOptimizely":function(t){var e=["activate"];window.optimizely=window.optimizely||[],t&&e.push(t),window.optimizely.push(e)},"fireDTMEvent":function(t){var e=$('<div data-dtm-event="'+t+'" style="display:none"/>');$("body").append(e),setTimeout(function(){e.remove()},5e3)}}}),function(){function t(){}function e(t,e){for(var i=t.length;i--;)if(t[i].listener===e)return i;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var s=t.prototype,a=this,r=a.EventEmitter;s.getListeners=function(t){var e,i,s=this._getEvents();if("object"==typeof t){e={};for(i in s)s.hasOwnProperty(i)&&t.test(i)&&(e[i]=s[i])}else e=s[t]||(s[t]=[]);return e},s.flattenListeners=function(t){var e,i=[];for(e=0;e<t.length;e+=1)i.push(t[e].listener);return i},s.getListenersAsObject=function(t){var e,i=this.getListeners(t);return i instanceof Array&&(e={},e[t]=i),e||i},s.addListener=function(t,i){var s,a=this.getListenersAsObject(t),r="object"==typeof i;for(s in a)a.hasOwnProperty(s)&&-1===e(a[s],i)&&a[s].push(r?i:{"listener":i,"once":!1});return this},s.on=i("addListener"),s.addOnceListener=function(t,e){return this.addListener(t,{"listener":e,"once":!0})},s.once=i("addOnceListener"),s.defineEvent=function(t){return this.getListeners(t),this},s.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},s.removeListener=function(t,i){var s,a,r=this.getListenersAsObject(t);for(a in r)r.hasOwnProperty(a)&&(s=e(r[a],i),-1!==s&&r[a].splice(s,1));return this},s.off=i("removeListener"),s.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},s.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},s.manipulateListeners=function(t,e,i){var s,a,r=t?this.removeListener:this.addListener,n=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(s=i.length;s--;)r.call(this,e,i[s]);else for(s in e)e.hasOwnProperty(s)&&(a=e[s])&&("function"==typeof a?r.call(this,s,a):n.call(this,s,a));return this},s.removeEvent=function(t){var e,i=typeof t,s=this._getEvents();if("string"===i)delete s[t];else if("object"===i)for(e in s)s.hasOwnProperty(e)&&t.test(e)&&delete s[e];else delete this._events;return this},s.removeAllListeners=i("removeEvent"),s.emitEvent=function(t,e){var i,s,a,r,n=this.getListenersAsObject(t);for(a in n)if(n.hasOwnProperty(a))for(s=n[a].length;s--;)i=n[a][s],i.once===!0&&this.removeListener(t,i.listener),r=i.listener.apply(this,e||[]),r===this._getOnceReturnValue()&&this.removeListener(t,i.listener);return this},s.trigger=i("emitEvent"),s.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},s.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},s._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},s._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return a.EventEmitter=r,t},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}.call(this),function(t){function e(e){var i=t.event;return i.target=i.target||i.srcElement||e,i}var i=document.documentElement,s=function(){};i.addEventListener?s=function(t,e,i){t.addEventListener(e,i,!1)}:i.attachEvent&&(s=function(t,i,s){t[i+s]=s.handleEvent?function(){var i=e(t);s.handleEvent.call(s,i)}:function(){var i=e(t);s.call(t,i)},t.attachEvent("on"+i,t[i+s])});var a=function(){};i.removeEventListener?a=function(t,e,i){t.removeEventListener(e,i,!1)}:i.detachEvent&&(a=function(t,e,i){t.detachEvent("on"+e,t[e+i]);try{delete t[e+i]}catch(s){t[e+i]=void 0}});var r={"bind":s,"unbind":a};"function"==typeof define&&define.amd?define("eventie/eventie",r):t.eventie=r}(this),function(t,e){"function"==typeof define&&define.amd?define("imagesloaded",["eventEmitter/EventEmitter","eventie/eventie"],function(i,s){return e(t,i,s)}):"object"==typeof exports?module.exports=e(t,require("eventEmitter"),require("eventie")):t.imagesLoaded=e(t,t.EventEmitter,t.eventie)}(this,function(t,e,i){function s(t,e){for(var i in e)t[i]=e[i];return t}function a(t){return"[object Array]"===p.call(t)}function r(t){var e=[];if(a(t))e=t;else if("number"==typeof t.length)for(var i=0,s=t.length;s>i;i++)e.push(t[i]);else e.push(t);return e}function n(t,e,i){if(!(this instanceof n))return new n(t,e);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=r(t),this.options=s({},this.options),"function"==typeof e?i=e:s(this.options,e),i&&this.on("always",i),this.getImages(),l&&(this.jqDeferred=new l.Deferred);var a=this;setTimeout(function(){a.check()})}function o(t){this.img=t}function d(t){this.src=t,u[t]=this}var l=t.jQuery,h=t.console,c="undefined"!=typeof h,p=Object.prototype.toString;n.prototype=new e,n.prototype.options={},n.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;e>t;t++){var i=this.elements[t];"IMG"===i.nodeName&&this.addImage(i);for(var s=i.querySelectorAll("img"),a=0,r=s.length;r>a;a++){var n=s[a];this.addImage(n)}}},n.prototype.addImage=function(t){var e=new o(t);this.images.push(e)},n.prototype.check=function(){function t(t,a){return e.options.debug&&c&&h.log("confirm",t,a),e.progress(t),i++,i===s&&e.complete(),!0}var e=this,i=0,s=this.images.length;if(this.hasAnyBroken=!1,!s)return void this.complete();for(var a=0;s>a;a++){var r=this.images[a];r.on("confirm",t),r.check()}},n.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded;var e=this;setTimeout(function(){e.emit("progress",e,t),e.jqDeferred&&e.jqDeferred.notify&&e.jqDeferred.notify(e,t)})},n.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var e=this;setTimeout(function(){if(e.emit(t,e),e.emit("always",e),e.jqDeferred){var i=e.hasAnyBroken?"reject":"resolve";e.jqDeferred[i](e)}})},l&&(l.fn.imagesLoaded=function(t,e){var i=new n(this,t,e);return i.jqDeferred.promise(l(this))}),o.prototype=new e,o.prototype.check=function(){var t=u[this.img.src]||new d(this.img.src);if(t.isConfirmed)return void this.confirm(t.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var e=this;t.on("confirm",function(t,i){return e.confirm(t.isLoaded,i),!0}),t.check()},o.prototype.confirm=function(t,e){this.isLoaded=t,this.emit("confirm",this,e)};var u={};return d.prototype=new e,d.prototype.check=function(){if(!this.isChecked){var t=new Image;i.bind(t,"load",this),i.bind(t,"error",this),t.src=this.src,this.isChecked=!0}},d.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},d.prototype.onload=function(t){this.confirm(!0,"onload"),this.unbindProxyEvents(t)},d.prototype.onerror=function(t){this.confirm(!1,"onerror"),this.unbindProxyEvents(t)},d.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},d.prototype.unbindProxyEvents=function(t){i.unbind(t.target,"load",this),i.unbind(t.target,"error",this)},n}),define("app/utils/ItemCarousel",["require","imagesloaded","app/config"],function(t){function e(t){this.$items_wrapper=t.$items_wrapper,this.wrapper_class=t.wrapper_class||"",this.scrollToItemNum=t.scrollToItemNum||"",this.$items=this.$items_wrapper.children(),this.$items.hide().eq(0).show(),this.items_count=this.$items.length,this.hidden=t.hidden,this.show_pager=t.show_pager,this.show_forward_btn=t.show_forward_btn,this.position_btn=t.position_btn,this.fixed_height=!!t.fixed_height,this.current_slide=0,this.rounding_error=2,this.init()}t("imagesloaded"),t("app/config");return e.prototype={"init":function(){var t=this;this.$items_wrapper.wrap("<div class='itemcarousel_wrapper "+this.wrapper_class+"'></div>"),this.$items_wrapper.wrap("<div class='itemcarousel'></div>"),this.$itemcarousel_wrapper=this.$items_wrapper.parent().parent(),this.$itemcarousel=this.$items_wrapper.parent(),this.$itemcarousel_wrapper.prepend("<div class='btn_carousel back'><p class='icon-arrow-large-left'></p></div>"),this.$itemcarousel_wrapper.append("<div class='btn_carousel forward'><p class='icon-arrow-large-right'></p></div>"),this.$btn_carousel=$(".btn_carousel",this.$itemcarousel_wrapper),this.$btn_forward=$(".btn_carousel.forward",this.$itemcarousel_wrapper),this.$btn_back=$(".btn_carousel.back",this.$itemcarousel_wrapper),this.$img=$("img",this.$items.eq(0)).eq(0),this.shww_pager||this.addCarouselPager(),$(window).on("resize",$.proxy(this.onresize,this)),this.$btn_forward.on("click",$.proxy(this.onforward,this)),this.$btn_back.on("click",$.proxy(this.onback,this)),$(window).resize(),this.$img.imagesLoaded(function(){setTimeout(function(){t.build_carousel()},600)})},"addCarouselPager":function(){this.$carousel_pager=$("<div />").addClass("carousel_pager");for(var t=0;t<this.slide_count;t++)self.$carousel_pager.append($("<span />"));this.$carousel_pager.children().eq(0).addClass("active"),this.$itemcarousel_wrapper.append(this.$carousel_pager),this.$carousel_pager.addClass("hidden"),this.$carousel_pager.children().on("click",function(){self.scrollslide($(this).index())})},"build_carousel":function(){var t=this;this.$item1=this.$items.eq(0),this.item_width=this.$item1.width(),this.item_outerwidth=this.$item1.outerWidth(!0),this.item_height=this.$item1.height(),this.items_total_width=this.items_count*this.item_outerwidth,this.item_per_slide=Math.floor(this.$items_wrapper.width()/this.item_outerwidth),this.slide_count=Math.ceil(this.items_count/this.item_per_slide),(this.items_total_width>this.$itemcarousel.width()||this.show_forward_btn)&&this.$btn_forward.show(),this.$items.width(this.item_width),this.$items_wrapper.width(this.items_total_width),this.fixed_height?(this.$items_wrapper.css({"position":"absolute"}),this.$itemcarousel.height(this.$items_wrapper.height())):this.$items_wrapper.css({"position":"relative"}),this.$items_wrapper.show(),this.hidden&&this.$itemcarousel_wrapper.hide(),"item"!==this.position_btn?t.$btn_carousel.css({"top":.5*t.$img.height()}):this.$btn_carousel.css({"top":.5*this.item_height}),this.$items.show(),this.scrollToItemNum&&this.scrollToItem(this.scrollToItemNum)},"scrollToItem":function(t){this.scrollslide(Math.floor(t/this.item_per_slide),0)},"setpager":function(t){this.$carousel_pager&&(this.$carousel_pager.children().removeClass("active"),this.$carousel_pager.children().eq(t).addClass("active"))},"scrollindex":function(t){var e=t*this.item_outerwidth;this.current_slide=t,this.$items_wrapper.css({"left":-e}),t+1==this.items_count?(this.$btn_forward.hide(),this.$btn_back.show()):0==t?(this.$btn_forward.show(),this.$btn_back.hide()):(this.$btn_forward.show(),this.$btn_back.show()),this.setpager(this.current_slide)},"scrollslide":function(t,e){t>this.current_slide?(this.current_slide=t-1,this.onforward(e)):t<this.current_slide&&(this.current_slide=t+1,this.onback(e))},"closeMore":function(t){var e=this.$items.eq(t).find(".btn_more_less");-1!=e.text().indexOf("LESS")&&e.trigger("click")},"onforward":function(t){this.closeMore(this.current_slide);var t=!isNaN(t)&&t>-1?t:500,e=(this.current_slide+1)*this.item_outerwidth*this.item_per_slide,i=this.items_total_width-this.$itemcarousel.width(),s=i-e+this.rounding_error;this.$btn_back.show(),this.current_slide++,s<this.item_outerwidth&&(e=i,this.$btn_forward.hide()),this.$items_wrapper.animate({"left":-e},t),this.setpager(this.current_slide)},"onback":function(){this.closeMore(this.current_slide);var t=!isNaN(t)&&t>-1?t:500,e=(this.current_slide-1)*-this.item_outerwidth*this.item_per_slide;0>=e&&(this.$btn_forward.show(),this.current_slide--,0==e&&(e=0,this.$btn_back.hide()),this.$items_wrapper.animate({"left":e},t)),this.setpager(this.current_slide)},"onresize":function(){this.current_slide=0,this.$items_wrapper.css({"left":0}),this.$btn_back.hide(),this.items_total_width>this.$itemcarousel.width()||this.show_forward_btn?this.$btn_forward.show():this.$btn_forward.hide(),this.setpager(this.current_slide)},"removeitem":function(){this.items_count--,this.items_total_width=this.items_count*this.item_outerwidth,this.$items_wrapper.width(this.items_total_width),this.onresize()}},e}),define("app/modules/Articles/EmbedView",["require","underscore","mustache","backbone","AdUtil"],function(t){var e=t("underscore"),i=t("mustache"),s=t("backbone"),a=t("AdUtil");return EmbedView=s.View.extend({"initEmbedView":function(){this.$modal=$("#article_modal_wrapper"),this.$modal_content=$("#modal_content")},"displayModal":function(t){$("body").data("modal_open","true"),this._modal_content_template=t._template,this.renderModal(),this.initAdUtil(),this.initModalHandler(),this.$modal.show().removeClass().addClass(t.modal_class),t.callback.call(this)},"renderModal":function(){var t=i.render(this._modal_content_template,this.data);this.$modal_content.html(t),window._satellite&&(_satellite.setVar("currentArticleDataOld",_satellite.getVar("currentArticleData")),_satellite.setVar("currentArticleData",this.data),_satellite.track("embed_list_modal"))},"initAdUtil":function(){a.setProgressiveLoading(!1),a.setMetas(this.data.adutil_metas),e.isFunction(a.updateSSID)&&a.updateSSID(this.data.ssid),this.renderAds()},"renderAds":function(t){var e={"container":this.$modal};t&&t.forced?a.forceRefresh(e):a.render(e)},"initModalHandler":function(){$("#article_modal_bg, #article_modal_close").off("click").on("click",e.bind(this.closeModal,this))},"showModal":function(){$("body").data("modal_open","true"),this.$modal.show()},"hideModal":function(){$("body").data("modal_open","false"),this.$modal.hide()},"closeModal":function(){$("body").data("modal_open","false"),this.$modal.hide(),this.$modal_content.html(""),this.resetAdUtil()},"resetAdUtil":function(){var t=$("body").data("current_article_metas");a.setMetas(t),a.setProgressiveLoading(!0)}})}),define("text!templates/Mustache/Articles/extended/embed_video.html",[],function(){return'\n								        <div class="player_title">RELATED VIDEO</div>\n								        <div class="player_poster">\n								        {{#clip_data}}\n								        	<div id="akamai-player-wrapper{{id}}" class="akamai-player-wrapper">\n							                    <div id="akamai-media-player{{id}}"  style="display: none" class="akamai-media-player">\n							                    </div>								        \n									        	<img class="poster_elements" src="{{posterFramePath}}">\n									        	<div class="poster_elements video_button"></div>\n							                </div>								        \n								        </div>\n								        {{#title}}\n								        <div class="video_title">{{{title}}}</div>\n								        {{/title}}\n								        {{/clip_data}}\n\n								        \n								        \n								        								        \n'}),define("app/modules/Articles/EmbedVideo",["require","underscore","mustache","backbone","app/utils/Akamai/Player","app/utils/ItemCarousel","app/modules/Articles/EmbedView","text!templates/Mustache/Articles/extended/embed_video.html"],function(t){var e=(t("underscore"),t("mustache")),i=(t("backbone"),t("app/utils/Akamai/Player")),s=(t("app/utils/ItemCarousel"),t("app/modules/Articles/EmbedView")),a=t("text!templates/Mustache/Articles/extended/embed_video.html");return EmbedVideo=s.extend({"className":"player_wrapper_inline","events":{"click .akamai-player-wrapper":"initVideoPlayer"},"initialize":function(t){this.data=t.data},"render":function(){var t=e.render(a,this.data);return this.$el.html(t),this},"initVideoPlayer":function(t){if("Y"===this.data.clip_data.is_displayable)this.displayVideoPlayer();else{var e="Unfortunately this video is not currently available in your country or region. We apologize for the inconvenience.";$("#akamai-player-wrapper"+t.article_id).addClass("no-video").text(e)}},"displayVideoPlayer":function(){if(!this.videoDisplayed){this.videoDisplayed=!0;var t="akamai-media-player"+this.data.clip_data.id,e=new i({"container":t,"clip_data":this.data.clip_data,"autoplay":!0});e.loadAMPlayer(),this.$el.find(".poster_elements").hide(),this.$el.find("#"+t).show()}}})}),define("app/utils/StickyAd",["require","app/config","jquery","app/utils/UrlUtil","underscore"],function(t){var e=t("app/config"),i=t("jquery"),s=t("app/utils/UrlUtil"),a=t("underscore"),r=function(t){this.opts=t||{},this.qs=(new s).getQuerystringObject(),this.adStickTime=this.qs.sticktime||3e3,this.topOffset=i("#sitenav").height()};return r.prototype={"init":function(){return this.qs.sticktype?(e.isMobilePhone&&"loadall"==this.qs.sticktype&&(this.qs.sticktype="loadtop"),this.$stickyAds=i("loadtop"==this.qs.sticktype?"#page_ad":"#page_ad, #main_ad, #main2_ad"),this.$pageAd=this.$stickyAds.eq(0),this.$mainAd=this.$stickyAds.eq(1),this.$main2Ad=this.$stickyAds.eq(2),this.expiredStickyCount=0,"forceloadtop"==this.qs.sticktype?void this.topAdOnlyInit():void this.allAdsInit()):void 0},"topAdOnlyInit":a.debounce(function(){if(!this.$pageAd.find("div[data-adunit]").html())return void this.topAdOnlyInit();var t=this,e=this.$pageAd.height();this.$pageAd.addClass("active_sticky").css({"top":-e}).animate({"top":this.topOffset},1200,function(){setTimeout(a.bind(t.topAdOnlyOut,t),t.adStickTime)}),this.$pageAd.next().hasClass("sticky_placeholder")||i("<div/>",{"class":"sticky_placeholder","css":{"height":this.$pageAd.outerHeight(!0)}}).insertAfter(this.$pageAd)},500),"topAdOnlyOut":function(){var t=this;this.$pageAd.animate({"top":-this.$pageAd.height()},1200,function(){t.unstickAd(t.$pageAd)})},"allAdsInit":function(){this.cacheAdVals(),i(window).on("scroll",a.bind(this.onScroll,this)).trigger("scroll"),setTimeout(a.bind(this.checkAds,this),500)},"cacheAdVals":function(){this.$stickyAds.each(function(){var t=i(this);t.data("id",t.attr("id")).data("$ad",t.find("div[data-adunit]"))})},"onScroll":function(){this.checkAds()},"checkAds":a.debounce(function(){var t=this;this.$stickyAds.each(function(){var e=i(this);e.data("adstate")||t.adLoadedCheck(e),"loaded"==e.data("adstate")&&(t.checkLoadedAdPosition(e),e.data("timerset")||(setTimeout(function(){t.expireAd(e)},t.adStickTime),e.data("timerset",1)))})},10),"adLoadedCheck":function(t){t.data("$ad").html()&&t.data("adstate","loaded")},"checkLoadedAdPosition":function(t){t.data("initTop")||t.data("initTop",t.offset().top);var e=t.data("id"),s="page_ad"!=e?this.getAdOffset(e):0,a=t.data("initTop")-i(window).scrollTop();s>=a?this.stickAd(t,s):this.unstickAd(t,e)},"getAdOffset":function(t){var e=0;return("main_ad"==t||"main2_ad"==t)&&(e=this.$pageAd.hasClass("active_sticky")?this.$pageAd.outerHeight(!0):0),"main2_ad"==t&&(e+=this.$mainAd.hasClass("active_sticky")?this.$mainAd.outerHeight(!0):0),e},"stickAd":function(t,e){t.addClass("active_sticky").css({"top":this.topOffset+e}),t.next().hasClass("sticky_placeholder")||i("<div/>",{"class":"sticky_placeholder","css":{"height":t.outerHeight(!0)}}).insertAfter(t)},"unstickAd":function(t){t.removeClass("active_sticky").css({"top":"auto"}).next(".sticky_placeholder").remove()},"expireAd":function(t){if(t.data("adstate","expired"),this.unstickAd(t),this.expiredStickyCount+=1,this.expiredStickyCount==this.$stickyAds.length)i(window).off("scroll",a.bind(this.onScroll,this));else{var e=t.data("id");("page_ad"==e||"main_ad"==e)&&this.updateAdTop(t,e)}},"updateAdTop":function(t,e){var i=t.outerHeight(!0)-20;"page_ad"==e&&"loaded"==this.$mainAd.data("adstate")&&this.$mainAd.css({"top":parseInt(this.$mainAd.css("top"))-i}),"loaded"==this.$main2Ad.data("adstate")&&this.$main2Ad.css({"top":parseInt(this.$main2Ad.css("top"))-i})}},r}),define("app/modules/Articles/Base/BaseSlideshowTextView",["require","underscore","jquery","mustache","app/modules/Global","AdUtil","app/utils/CookieUtil","app/utils/UrlUtil","app/utils/TrackingUtil","app/modules/Articles/EmbedVideo","app/utils/StickyAd","app/utils/LazyLoad"],function(t){var e=t("underscore"),i=t("jquery"),s=t("mustache"),a=t("app/modules/Global"),r=t("AdUtil"),n=(t("app/utils/CookieUtil"),t("app/utils/UrlUtil")),o=t("app/utils/TrackingUtil"),d=t("app/modules/Articles/EmbedVideo"),l="app/modules/Articles/RelatedArticles",h=t("app/utils/StickyAd"),c=t("app/utils/LazyLoad");c("https://js.createsend1.com/javascript/copypastesubscribeformlogic.js");var p=Backbone.View.extend({"baseSlideshowTextViewInit":function(){this.UrlUtil=new n,this.qs=this.UrlUtil.getQuerystringObject(),this.csr="undefined"!=typeof json,this.StickyAd=new h;var t="undefined"!=typeof json?json:O20.api_data;i("body").addClass("extended_article"),new a("own-show"==O20.api_data.content_source?{"noNav":1}:{}),this.extendData(t)},"extendData":function(t){t.article_id=t.article_id?t.article_id:"preview_placeholder_id",t.article_only=e.contains(["12337"],t.article_id),t.disable_ad=e.contains(["drmayaangelou"],t.search_section),t.ad_type="outbrain",t.articlecount=this.count,t.toolbar.idx=Math.floor(Math.random()*(new Date).getTime()+1),this.data=t,this.csr?this.addWrapper():this.initArticle()},"addWrapper":function(){var e=this;this.data.csrender=!0,this.data.clientside=1,t(["text!templates/Mustache/Articles/extended/article.html"],function(t){html=s.render(t,e.data),e.$el.html(html),e.initArticle()})},"initArticle":function(){Modernizr.history&&!this.qs.page_key&&Backbone.history.start({"pushState":!0}),this.articleTypeInit(this.data),this.csr?this.$el.on("articlerendered",e.bind(this.onArticleTypeInit,this)):this.onArticleTypeInit()},"onArticleTypeInit":function(){var s=this;this.hideAdsense(this.data.article_id),this.$(".article-trending li p, .recirculation-module__title").each(function(){s.truncateText(this)}),i(window).on("message",e.bind(this.processMessage,this)),this.data.disable_ad||("slide_show"==this.data.article_type&&r.setMetas("templatetype",this.data.template_type),r.render(),t([l],function(t){s.RelatedArticles=t,new t({"model":s.data,"type":s.data.ad_type})})),o.initOptimizely()},"hideAdsense":function(t){var s=["53008","53001","53014","53016","53017","53023","53028","53024"];e.contains(s,t)&&i('.article-wrapper[data-id="'+t+'"] div[data-adunit-type="adsense"]').parent().remove()},"processMessage":function(t){var e=t.originalEvent,s=this.UrlUtil.getQuerystringObject(e.data);if(s.surveygizmo_completed){var a=i('iframe[src="'+s.url+'"]');i("html,body").animate({"scrollTop":a.offset().top-70})}},"truncateText":function(t){t=i(t);for(var e=t.prop("scrollWidth"),s=t.prop("scrollHeight"),a=(t.innerWidth(),t.innerHeight()),r=t.html().split(" ");r.length&&s>a;)r.pop(),t.html(r.join(" ")+"&hellip;"),e=t.prop("scrollWidth"),s=t.prop("scrollHeight")},"onData":function(t){this.data_loaded=!0,this.extendData(t)},"initAdBottom":function(){var t=this.$el.find(".ad_bottom");if(t.length){var i=e.template(_template_section_ad,{"config":config,"hideAdvertiserText":"true","adsense":!0});t.html(i),config.isMobilePhone&&t.before('<div class="ad_mobile_phone"><div data-adunit="true" data-adunit-size="300x251,300x100" data-adunit-position="lower"></div></div>')}},"initEmbeddedVideo":function(){if(this.data.clip_data){var t=new d({"data":i.extend(!0,{},this.data)}),e=this.$el.find(".video_embed");0===e.length&&(e=i(".extend-articles-wrapper").find(".video_embed")),e.html(t.render().$el)}},"initSectionAd":function(){var t=this.$el.find(".section_ad_wrapper");if(t.length){var i=e.template(_template_section_ad,{"config":config,"hideAdvertiserText":"true","position":"top"});t.before(i),t.remove()}},"refreshAd":function(){this.disable_ad||(this.data.ssid&&r.adManager.updateSSID(this.data.ssid),r.forceRefresh({"container":this.$el,"resetTracking":!0}))},"updateRelatedArticles":function(){new this.RelatedArticles({"el":this.$el.find(".related-articles"),"model":this.data})},"updateContentAd":function(){this.disable_ad||new this.RelatedArticles({"model":this.data,"type":this.ad_type,"update_article_index":i(".article-wrapper").index(this.$el)})}});return p}),define("app/modules/Newsletters/SubscribeWidget",["require","jquery","underscore"],function(t){var e=t("jquery"),i=t("underscore");return{"activate":function(t){Global.IS_ENV_EU||(this.$input_email=e("input[name=email]",this.$el),t.submit(i.bind(this.submit,this)))},"validateEmail":function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(String(t).toLowerCase())},"submit":function(t){t.preventDefault();var s=e(t.currentTarget),a={};return i.each(s.serializeArray(),function(t){a[t.name]=t.value}),a.email&&this.validateEmail(a.email)?void e.ajax({"type":"POST","url":"/json/newsletters/json_braze.html","data":a}).done(i.bind(this.done,this)).fail(i.bind(this.display_error,this,"A network error occured, please try again later.")):void this.display_error("Please enter a valid email address.")},"done":function(t){"success"===t.message?(this.display_success("Thank you for subscribing."),this.$input_email.val("")):this.display_error("A error occured, please try again later.")},"display_success":function(t){e(".subscribe-widget").each(function(){e(this).addClass("subscribe-widget--success")}),alert(t)},"display_error":function(t){e(".subscribe-widget").each(function(){e(this).addClass("subscribe-widget--error"),setTimeout(function(){e(this).removeClass("subscribe-widget--error")},400)}),alert(t)}}}),define("app/utils/AdUtil/PublicGoodAd",["require","app/config","backbone","app/utils/LazyLoad","jquery"],function(t){var e=t("app/config"),i=t("backbone"),s=t("app/utils/LazyLoad"),a=t("jquery"),r=!1;return i.View.extend({"retries":0,"timer":[1,2,4,8],"initialize":function(){var t=this;e.hasCookieConsent()&&"ownshow"!==a("meta[name=contentsource]").attr("content")&&setTimeout(function(){a(window).one("scroll",t.initializeAd.bind(t))},250)},"initializeAd":function(){var t=this;t.$el.html('<div class="pgs-dpg-flex" data-pgs-partner-id="discovery-oprah"></div>'),r||(r=!0,s("https://assets.publicgood.com/pgm/v1/dpg.js",t.detectAd.bind(t)))},"detectAd":function(){var t=this,e=t.$(".pgs-dpg-flex"),i=0,s=function(){var a=t.timer[i++],r=e.height();r&&window.dataLayer&&window.dataLayer.push({"event":"publicgood_ad_display"}),a&&!r&&setTimeout(s,1e3*a)};s()}})}),define("app/modules/SocialBar/ShareIcon",["require","jquery","backbone"],function(t){var e=t("jquery"),i=t("backbone"),s=i.View.extend({"events":{"click":"handleClick"},"initialize":function(t){var e=this,i=e.el.className;e.opts=t||{},e.isFacebook=/facebook/i.test(i),e.isTwitter=/twitter/i.test(i),e.isPinterest=/pinterest/i.test(i)},"getUrl":function(t){var e=this,i=e.opts.url||e.$el.data("url")||window.location.href;return t===!0?encodeURIComponent(i):i},"getImage":function(t){var i=this,s=i.opts.image||i.$el.data("media")||i.$el.data("image")||e("meta[property='og:image']").attr("content")||"";return t===!0?encodeURIComponent(s):s},"getText":function(t){var i=this,s=i.opts.text||i.$el.data("text")||i.$el.data("description")||e("meta[property='og:description']").attr("content")||"",a=e("<div/>");a.html(s);var r=a.text();return t===!0?encodeURIComponent(r):r},"handleClick":function(){var t=this;t.isFacebook&&t.facebookShare(),t.isTwitter&&t.twitterShare(),t.isPinterest&&t.pinterestShare()},"facebookShare":function(){var t=this,e="https://www.facebook.com/dialog/share?app_id=9612363295455467&display=popup&href="+t.getUrl(!0);window.open(e,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=675,width=745")},"twitterShare":function(){var t=this;window.open("https://twitter.com/intent/tweet?text="+t.getText(!0)+"&url="+t.getUrl(!0)+"&related=","","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")},"pinterestShare":function(){var t=this;window.open("https://www.pinterest.com/pin/create/button/?description="+t.getText(!0)+"&img_url="+t.getImage(!0)+"&media="+t.getImage(!0)+"&method=button&url="+t.getUrl(!0),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=823,width=1050")}});return s.initContainer=function(t){var i=e(t);i.find(".addthis_share_button").each(function(){new s({"el":this})})},s}),define("app/slideshow_article",["require","app/config","jquery","underscore","mustache","app/modules/Articles/Base/BaseSlideshowTextView","app/modules/Newsletters/SubscribeWidget","app/utils/AdUtil/PublicGoodAd","AdUtil","app/modules/SocialBar/ShareIcon"],function(t){var e=t("app/config"),i=t("jquery"),s=t("underscore"),a=t("mustache"),r=t("app/modules/Articles/Base/BaseSlideshowTextView"),n=t("app/modules/Newsletters/SubscribeWidget"),o=t("app/utils/AdUtil/PublicGoodAd"),d=t("AdUtil"),l=t("app/modules/SocialBar/ShareIcon"),h="text!templates/Mustache/Articles/extended/",c=r.extend({"initialize":function(){this.baseSlideshowTextViewInit(),new o({"el":i(".publicgood_wrapper")})},"articleTypeInit":function(t,e){this.router=e,this.data=t,this.ad_type=t.ad_type,this.disable_ad=t.disable_ad,this.clip_data=t.clip_data,this.idx=t.toolbar.idx,this.$page=i(".page"),this.click_counter=0,this.render()},"render":function(){this.data.disable_ad=this.disable_ad,this.data.clip_data=this.clip_data,this.data.toolbar.idx=this.idx,this.data.csrender||this.updateArticle?this.lazyLoadTemplates():this.updateHTML()},"lazyLoadTemplates":function(){if(!this.tmpObj){var e=this;return void t([h+"slideshow_article.html",h+"slideshow_article_body.html",h+"slideshow_article_body_list.html",h+"slideshow_article_body_gift.html",h+"slideshow_article_body_book.html",h+"related_articles.html","text!templates/Mustache/Module/subscribe_widget.html"],function(t,i,s,a,r,n,o){e.tmpObj={"s":t,"sb":i,"sbl":s,"sbg":a,"sbb":r,"r":n,"sw":o},e.renderTemplates(e.tmpObj)})}this.renderTemplates(this.tmpObj)},"renderTemplates":function(t){var e={"slideshowarticlebody":t.sb,"slideshowarticlebodylist":t.sbl,"slideshowarticlebodygift":t.sbg,"slideshowarticlebodybook":t.sbb,"relatedarticles":t.r,"subscribewidget":t.sw};html=a.render(t.s,this.data,e),this.updateArticle?(this.updateArticle=!1,this.$page.find(".extend-articles-wrapper").replaceWith(html)):this.$page.append(html),this.updateHTML(),this.data.csrender&&this.$el.trigger("articlerendered"),this.data.csrender=!1},"updateHTML":function(){var t=this;this.setElement(this.$page.find(".article-wrapper[data-id="+this.data.article_id+"]")),this.$el.data("article_data",this.data),this.$el.data("index",this.data.articlecount),e.isMobilePhone?this.$el.find(".outbrain_wrapper").before('<div class="article_sharebar_bottom">').end().find(".article-body .article_sharebar").after(i(".related-articles .content_ad:eq(0)")):this.$el.find(".ad_mobile_phone").remove(),setTimeout(function(){t.initSlide()},250)},"initSlide":function(){var t=this;t.initHandler(),t.StickyAd.init(),t.initEmbeddedVideo(),t.next_slide?(d.disableScroll(),i(window).trigger("scroll"),i("html").scrollTop(t.scrollTop),i("#top_nav_tools").attr("data-page",t.page),d.enableScroll(),t.updateHistory(),t.refreshAd(),t.updateContentAd(),t.$page.trigger("loadedNewContent")):t.next_slide=!0,this.initShareBar(),t.initSubscribeWidget()},"initSubscribeWidget":function(){i(".subscribe-widget").each(function(){n.activate(i(this))})},"initHandler":function(){var t=[".articleslide-arrow-large-left",".articleslide-arrow-large-right",".articleslide-prev",".articleslide-next"];"book"!=this.data.article_type&&"product"!=this.data.article_type&&this.$el.off("click",t.join(","),s.bind(this.onNavViewSlide,this)).on("click",t.join(","),s.bind(this.onNavViewSlide,this))},"initShareBar":function(){l.initContainer(".addthis_share")},"onNavViewSlide":function(t){var e=i(t.currentTarget);if(this.page=e.attr("data-page"),e.hasClass("inactive"))return void t.preventDefault();if(this.page){if(t.preventDefault(),e.hasClass("nextslideshow"))return void(window.location=this.data.next_slideshow_url);this.loadSlide()}},"loadSlide":function(){this.scrollTop=i("html").scrollTop();var t=s.extend({},this.qs);t.article_id=this.data.article_id,t.page=this.page,i.ajax({"url":e.articleServiceUrl,"data":t,"dataType":e.dataType}).then(s.bind(this.displaySlide,this))
},"displaySlide":function(t){this.updateArticle=!0,this.data=t,this.render(),this.trigger("loaded:page",t),_satellite.setVar("currentArticleData",t),_satellite.track("article_pagination")},"updateHistory":function(){if(this.router){var t,e=window.location.pathname,i=e.split("/");i.shift(),this.qs.page_key?t=e:/^\d*$/.test(i[i.length-1])?(i.pop(),t=i.join("/")+"/"+this.page):t=e+"/"+this.page,this.router.navigate(t)}},"checkInterstitialAd":function(){if(!e.isMobilePhone){this.click_counter+=1,this.$arrow=this.$el.find(".articleslide-arrow"),this.$interstitialAd=this.$el.find(".interstitial_content_ad"),5==this.click_counter?(this.click_counter=0,this.$el.addClass("display_interstitial"),this.$arrow.attr("data-page",this.data.curr_page),this.$interstitialAd.show().find("div").attr("data-adunit",!0)):this.$el.removeClass("display_interstitial")}}});i(function(){new c({"el":".page"})})});